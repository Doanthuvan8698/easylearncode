{% extends "main.html" %}
{% block mediaCSS %}
    <link href="/application/css/account.css" rel="stylesheet"/>
{% endblock %}
{% block content %}
    <div class="container" data-ng-controller="accountPage">
        <div class="row">
            <div class="col-md-12">
                <div class="page-header">
                    <h1>Tài khoản của tôi</h1>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-3">
                <ul class="nav nav-pills nav-stacked nav-stacked-extended">
                    <!-- target="_self" b/c http://docs.angularjs.org/guide/dev_guide.services.$location -->
                    <li data-ng-class="{active: isActive('/contact-info')}">
                        <a href="#!/contact-info" target="_self">Thông tin cá nhân</a>
                    </li>
                    <li data-ng-class="{active: isActive('/password')}">
                        <a href="#!/password" target="_self">Mật khẩu</a>
                    </li>
                    <li data-ng-class="{active: isActive('/my-courses')}">
                        <a href="#!/my-courses" target="_self">Các khóa đang học</a>
                    </li>
                    <li data-ng-class="{active: isActive('/linked-accounts')}">
                        <a href="#!/linked-accounts" target="_self">Liên kết tài khoản</a>
                    </li>
                </ul>
            </div>
            <div class="col-md-9" data-ng-view>
            </div>
        </div>

    </div>
    <script type="text/ng-template" id="/templates/angular/account/contact_info.html">
    {% raw %}
        <div class="text-center" data-ng-show="!showForm">
            <div class="row row-gap-huge">
                <img src="//lh5.ggpht.com/b3OandPWsUWAnRVS5d8JS8OL0nu8dU2d3NceS7p1yKhPl9KD4EhqeylPm7yFbft5wmsA2VCAZ-8wAkmFduXJ=s0#w=90&h=30">
            </div>
        </div>
        <div class="row row-gap-medium">
            <form class="form-horizontal" role="form" data-ng-show="showForm">
                <!-- maybe make these server messages a directive -->
                <div class="form-group text-center">
                    <div class="row"  data-ng-show="serverError">
                        <div class="alert alert-danger col-md-offset-1 col-md-9">
                            {{serverError}}
                        </div>
                    </div>
                    <div class="row" data-ng-show="serverSuccess">
                        <div class="alert alert-success col-md-offset-1 col-md-9">
                            {{serverSuccess}}
                        </div>
                    </div>
                </div>
                <div class="form-group" data-ng-class="{'has-error': contactInfoErrors.setsFirstName || contactInfoErrors.setsLastName}">
                    <label for="firstName" class="col-md-3 control-label">Họ và tên</label>
                    <div class="col-md-3">
                        <input type="text" class="form-control" id="firstName" placeholder="First Name" data-ng-model="user['name']">
                    </div>
                    <div class="col-md-3">
                        <input type="text" class="form-control" id="lastName" placeholder="Last Name" data-ng-model="user['last_name']">
                    </div>
                    <div class="col-md-3 form-error">
                        <p data-ng-repeat="err in contactInfoErrors.setsFirstName">{{err}}</p>
                        <p data-ng-repeat="err in contactInfoErrors.setsLastName">{{err}}</p>
                    </div>
                </div>
                <div class="form-group">
                    <label for="nickname" class="col-md-3 control-label">Nickname</label>
                    <div class="col-md-6">
                        <input type="text" class="form-control" id="nickname" placeholder="Nickname" data-ng-model="user['username']">
                    </div>
                </div>
                <div class="form-group" data-ng-class="{'has-error': contactInfoErrors.setsEmail}">
                    <label for="email" class="col-md-3 control-label">Email</label>
                    <div class="col-md-6">
                        <input type="email" class="form-control" id="email" placeholder="Email" data-ng-model="user['email']" disabled>
                    </div>
                    <div class="col-md-3 form-error">
                        <p data-ng-repeat="err in contactInfoErrors.setsEmail">{{err}}</p>
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-md-offset-3 col-md-9">
                        <button type="submit" class="btn btn-primary" data-ng-click="saveContactInfo()" data-ng-disabled="saveDisabled">Save</button>
                    </div>
                </div>
            </form>
        </div>
    {% endraw %}
    </script>
    <script type="text/ng-template" id="/templates/angular/account/password.html">
    {% raw %}
        <div class="text-center" data-ng-show="!showForm">
            <div class="row row-gap-huge">
                <img src="//lh5.ggpht.com/b3OandPWsUWAnRVS5d8JS8OL0nu8dU2d3NceS7p1yKhPl9KD4EhqeylPm7yFbft5wmsA2VCAZ-8wAkmFduXJ=s0#w=90&h=30">
            </div>
        </div>
        <div data-ng-show="showForm" class="row row-gap-medium">
            <h3 data-ng-hide="user['password'] !== null">
                Tạo mật khẩu mới
            </h3>
            <form class="form-horizontal" role="form">
                <!-- maybe make these server messages a directive -->
                <div class="form-group text-center">
                    <div class="alert alert-danger col-md-12" data-ng-show="serverError">
                        {{serverError}}
                    </div>
                    <div class="alert alert-success col-md-12" data-ng-show="serverSuccess">
                        {{serverSuccess}}
                    </div>
                </div>
                <div class="form-group" data-ng-class="{'has-error': passwordErrors.setsCurrPass}" data-ng-show="user['password']!=null">
                    <label for="currentPassword" class="col-md-3 control-label">Mật khẩu hiện tại</label>
                    <div class="col-md-6">
                        <input type="password" class="form-control" id="currentPassword" placeholder="" data-ng-model="currentPassword">
                    </div>
                    <div class="col-md-3 form-error">
                        <p data-ng-repeat="err in passwordErrors.setsCurrPass">{{err}}</p>
                    </div>
                </div>
                <div class="form-group" data-ng-class="{'has-error': passwordErrors.setsNewPass}">
                    <label for="newPassword" class="col-md-3 control-label">Mật khẩu mới</label>
                    <div class="col-md-6">
                        <input type="password" class="form-control" id="newPassword" placeholder="" data-ng-model="newPassword">
                    </div>
                    <div class="col-md-3 form-error">
                        <p data-ng-repeat="err in passwordErrors.setsNewPass">{{err}}</p>
                    </div>
                </div>
                <div class="form-group" data-ng-class="{'has-error': passwordErrors.setsConfirmedNewPass}">
                    <label for="confirmedNewPassword" class="col-md-3 control-label">Nhập lại mật khẩu mới</label>
                    <div class="col-md-6">
                        <input type="password" class="form-control" id="confirmedNewPassword" placeholder="" data-ng-model="confirmedNewPassword">
                    </div>
                    <div class="col-md-3 form-error">
                        <p data-ng-repeat="err in passwordErrors.setsConfirmedNewPass">{{err}}</p>
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-md-offset-3 col-md-9">
                        <button type="submit" class="btn btn-primary" data-ng-click="resetPassword()" data-ng-disabled="saveDisabled">Save</button>
                    </div>
                </div>
            </form>
        </div>
    {% endraw %}
    </script>
{% endblock %}
{% block pluginJS %}
    <script src="/application/js/libs/angularjs/angular-route.js"></script>
{% endblock %}