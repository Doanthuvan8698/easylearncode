{% extends "main.html" %}
{% block mediaCSS %}
    <link href="/application/css/practice.css" rel="stylesheet" type="text/css"/>
{% endblock %}
{% block content %}
    {% raw %}
        <div class="container" data-ng-controller="PracticeCtrl">
            <!-- Modal -->
            <div class="row">
                <div class="col-md-12 highlight">
                    <div class="row">
                        <div class="col-md-8">
                            <div class="panel panel-primary">
                                <div class="panel-heading">
                            <span class="pull-left">
                                <h3 class="panel-title"><i class="fa fa-terminal fa-lg"></i> Code window</h3>
                            </span>

                            <span class="pull-right">

                                <a class="btn btn-success" ng-click="runCode()" ng-disabled="!jsreplReady" ng-class="{'run-btn-full-screen':isEditorFullScreen}">
                                    <i class="fa fa-play" ></i> Run</a>
                                <a class="btn btn-default" ng-click="toggleFullScreen()" ng-class="{'full-btn-full-screen':isEditorFullScreen}">
                                    <i class="fa fa-laptop"></i> Full Screen</a>
                            </span>

                                    <div class="clearfix"></div>
                                </div>
                                <div>

                                </div>
                                <div class="panel-body">
                                    <div id="console" ng-show="showConsole" ng-class="{'full-screen':isEditorFullScreen}"></div>
                                    <alert ng-show="showAlert" type="alert.type" close="showAlert=false" class="console-alert"><span ng-bind-html="alert.msg|to_trusted"></span></alert>
                                    <div ui-ace="{theme:'chrome', onLoad: aceLoaded}"
                                         data-ng-model="source" ng-class="{'editor-full-screen':isEditorFullScreen}" >
                                    </div>
                                </div>
                            </div>

                        </div>
                        <div class="col-md-4">
                            <div class="lesson_info overlay" ng-show="show"></div>
                            <div class="panel panel-success">
                                <div class="panel-heading">
                                    <span class="pull-left"><h3 class="panel-title"><i
                                            class="fa fa-tasks fa-lg"></i> {{ exercise_item.title }}</h3></span>
                            <span class="pull-right">
                                <a class="btn btn-default" ng-click="show=!show" ng-class="{show:show}">
                                    1/10 <i class="fa fa-toggle-down"></i></a>
                                <div class="lesson_info popover fade bottom" ng-init="show=false" ng-class="{in:show}"
                                     ng-show="show"
                                     style="display: block;top: 40px;left: 77px;width: 330px;">
                                    <div class="arrow"></div>
                                    <h3 class="popover-title" style="display: none;"></h3>

                                    <div class="popover-content">
                                        <div class="panel panel-default" ng-repeat="project in exercise_item.projects">
                                            <div class="panel-heading">
                                                <h4 class="panel-title">
                                                    <a data-toggle="collapse" data-parent="#accordion"
                                                       href="#collapseOne">
                                                        {{ project.title }}
                                                    </a>
                                                </h4>
                                            </div>
                                            <div id="collapseOne" class="panel-collapse collapse in">
                                                <div class="panel-body">
                                                    <ul class="list-group"
                                                        ng-repeat="checkpoint in project.checkpoints">
                                                        <li class="list-group-item list-group-item-info" hover-class
                                                            add-class="list-group-item-success"
                                                            remove-class="list-group-item-info"
                                                            ng-click="changeCurrentCheckpoint(checkpoint);"><i
                                                                class="fa fa-arrow-circle-o-right"
                                                                ></i> {{ checkpoint.title }}
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                        <h5>Exercise by @Abc</h5>
                                    </div>
                                </div>
                            </span>

                                    <div class="clearfix"></div>
                                </div>
                                <div class="panel-body" style="padding: 2px">
                                    <div class="lesson-checkpoint__wrapper">
                                        <div class="lesson-checkpoint nano has-scrollbar">
                                            <div class="nano__content content">
                                                <div class="lesson-checkpoint__inner">
                                                    <div class="article__inner">
                                                        <div class="article__header">
                                                            <div class="lesson-checkpoint__name">{{ current_checkpoint.title }}</div>
                                                        </div>
                                                        <div class="article__content"
                                                             ng-bind-html="current_checkpoint._entry_html|to_trusted">

                                                        </div>
                                                    </div>
                                                    <div class="lesson-checkpoint__instructions">
                                                        <div class="article__inner lesson-checkpoint__instructions__header">
                                                            <div class="block-label--light-blue">Yêu cầu</div>
                                                        </div>
                                                        <div class="article__inner">
                                                            <p ng-bind-html="current_checkpoint._instruction_html|to_trusted"></p>

                                                            <div ng-if="current_checkpoint._hint_html" class="ui-accordian ui-accordian--lesson transition--max-height"
                                                                 ng-class="{'is-expanded':isExpanded,'largeHeight':isExpanded,'smallHeight':!isExpanded}"
                                                                 ng-init="isExpanded = false">
                                                                <div class="ui-accordian__inner">
                                                                    <a href="#" class="ui-accordian__trigger ui-media" ng-click="isExpanded = !isExpanded">
                                                                        <div class="ui-media__image new-icon--small new-icon--center new-icon--circle--blue">
                                                                            ?
                                                                        </div>
                                                                        <div class="ui-media__main">
                                                                            <span class="is-hidden-if-is-expanded"
                                                                                  ><b>Khó ư?</b> Nhấn để trợ giúp!</span>
                                                                            <span class="is-shown-if-is-expanded--inline"
                                                                                  ><b>Ẩn trợ giúp</b></span>
                                                                        </div>
                                                                    </a>

                                                                    <div class="ui-accordian__content has-markdown"
                                                                         ng-bind-html="current_checkpoint._hint_html|to_trusted">

                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>

                </div>

            </div>
        </div>
    {% endraw %}
{% endblock %}
{% block pluginJS %}
    <script src="//cdnjs.cloudflare.com/ajax/libs/ace/1.1.01/ace.js"></script>
    <script src="/application/js/libs/angularjs/ui-ace.min.js"></script>
    <script src="/application/js/libs/angularjs/ui-bootstrap-tpls-0.7.0.min.js"></script>
{% endblock %}
{% block mediaJS %}
    <script src="/application/js/libs/jqconsole.min.js" charset="UTF-8"></script>
    <script src="/application/js/libs/jsrepl/jsrepl.js" id="jsrepl-script"></script>
{% endblock %}